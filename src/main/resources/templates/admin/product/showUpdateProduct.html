<body xmlns:th="http://www.thymeleaf.org" lang="en">
    <div th:replace="admin/layout/header_admin"></div>
    <div class="content-wrapper" style="min-height: 1302.4px;">
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1>Product</h1>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">Product</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
        <section class="content-header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card card-primary">
                            <div class="card-header">
                                <h3 class="card-title">Update Product</h3>
                            </div>
                            <form th:object="${product}" action="updateProductAndPrice" method="post" enctype="multipart/form-data">
                                <div class="card-body row">
                                    <input type="hidden" id="id" name="id" th:value="${product.id}" class="form-control">
                                    <div class="form-group col-4">
                                        <label for="proName">Product Name</label>
                                        <input type="text" id="productName" name="productName" th:value="${product.product_name}" class="form-control" placeholder="Enter Product Name" required>
                                    </div>
									<div class="form-group col-3">
									    <label for="price">Price (USD)</label>
									    <input type="text" id="price" name="price" th:value="${product.price}" class="form-control" placeholder="Enter Price in USD" required>
									</div>
									
									<input type="hidden" id="newPrice" name="newPrice" th:value="${product.price}">
                                    <div class="form-group col-3">
                                        <label for="status">Status</label>
                                        <select th:field="*{status}" id="status" class="form-control" required>
                                            <option th:value="Active" th:text="Active"></option>
                                            <option th:value="InActive" th:text="InActive"></option>
                                            <option th:value="OutOfstock" th:text="OutOfstock"></option>
                                            <option th:value="NewRelease" th:text="NewRelease"></option>
                                        </select>
                                    </div>
									<!-- Warranty Period -->
									<div class="form-group col-2">
									    <label for="warrantyPeriod">Warranty Period</label>
									    <select th:field="*{warranty_period}" id="warrantyPeriod" class="form-control" required>
									        <option th:value="0">0 months</option>
									        <option th:value="6">6 months</option>
									        <option th:value="12">12 months</option>
									        <option th:value="18">18 months</option>
									        <option th:value="24">24 months</option>
									    </select>
									</div>
									<div class="form-group col-4">
                                        <label for="unitId">Unit</label>
                                        <select th:field="*{unit_id}" id="unitId" class="form-control" required>
                                            <option th:each="item : ${units}" th:value="${item.id}" th:text="${item.name}"></option>
                                        </select>
                                    </div>

                                    <div class="form-group col-4">
                                        <label for="brandId">Brand</label>
                                        <select th:field="*{brand_id}" id="brandId" class="form-control" required>
                                            <option th:each="item : ${brands}" th:value="${item.id}" th:text="${item.name}"></option>
                                        </select>
                                    </div>

                                    <div class="form-group col-4">
                                        <label for="cateId">Category</label>
                                        <select th:field="*{cate_id}" id="categoryId" class="form-control" required>
                                            <option th:each="item : ${categorys}" th:value="${item.id}" th:text="${item.name}"></option>
                                        </select>
                                    </div>
									<div class="form-group col-12">
									    <label for="description">Description</label>
									    <textarea id="description" th:field="*{description}" class="form-control" placeholder="Enter description" required></textarea>
									</div>

									<div class="form-group col-3">
                                        <label for="weight">Weight</label>
                                        <input type="number" id="weight" name="weight" th:value="${product.weight}" class="form-control" placeholder="Enter Weight" required>
                                    </div>

                                    <div class="form-group col-3">
                                        <label for="width">Width</label>
                                        <input type="number" id="width" name="width" th:value="${product.width}" class="form-control" placeholder="Enter Width" required>
                                    </div>

                                    <div class="form-group col-3">
                                        <label for="height">Height</label>
                                        <input type="number" id="height" name="height" th:value="${product.height}" class="form-control" placeholder="Enter Height" required>
                                    </div>

                                    <div class="form-group col-3">
                                        <label for="length">Length</label>
                                        <input type="number" id="length" name="length" th:value="${product.length}" class="form-control" placeholder="Enter Length" required>
                                    </div>
									<div class="form-group col-12">
									    <label for="productImage">Image</label>
									    <input type="file" class="form-control" th:field="*{img}" id="productImage" accept="image/*" onchange="showImage(event)" required>
									
									    <img id="preview" th:if="${product.img != null}" th:src="@{/uploads/{imageName}(imageName=${product.img})}" alt="Image preview" style="display: block; margin-top: 10px; max-width: 50%; height: 200px;">
									</div>
                                </div>

                                <div class="card-footer">
                                    <a th:href="@{/admin/product/showProduct}" class="btn btn-danger">Back to list product</a>
                                    <button type="submit" class="btn btn-primary">Update product</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <div th:replace="admin/layout/footer_admin"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script th:src="@{/js/updateProduct.js}"></script>
</body>